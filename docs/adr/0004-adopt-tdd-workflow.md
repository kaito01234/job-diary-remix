# ADR-0004: TDD（テスト駆動開発）の採用

## Status
Accepted

## Date
2025-07-15

## Context
高品質なコードを維持しながら、安心して機能追加・リファクタリングを行える開発手法が必要。特に、個人開発では品質管理が疎かになりがちなため、規律ある開発プロセスを確立したい。

### 要件
- バグの早期発見
- リファクタリングの安全性確保
- 設計の改善
- ドキュメントとしてのテスト

### 検討した選択肢
1. **TDD（Test-Driven Development）**: テストファーストで開発
2. **テスト後付け**: 実装後にテストを書く
3. **手動テストのみ**: 自動テストなし

## Decision
t_wadaさんのスタイルに基づくTDD（テスト駆動開発）を採用する。

### TDDのサイクル
1. **Red**: 失敗するテストを書く
2. **Green**: テストを通す最小限の実装
3. **Refactor**: コードを改善する

### t_wadaさんスタイルの特徴
- テストは「仕様書」として読めるように書く
- アサーションファースト（期待値から書く）
- 三角測量による一般化
- 仮実装から始める
- TODOリストによる段階的な実装

## Consequences

### Positive
- バグの早期発見により、デバッグ時間が削減
- テストがセーフティネットとなり、大胆なリファクタリングが可能
- テストが仕様書となり、コードの意図が明確
- 設計が自然とテスタブルになり、疎結合な構造に
- 実装の自信と心理的安全性の向上

### Negative
- 初期の開発速度が低下する可能性
- テストコードのメンテナンスコスト
- TDDの習得に時間がかかる
- 過度なモックによる脆いテストのリスク

### Neutral
- テストフレームワークの選定が必要（Vitest採用予定）
- CI/CDパイプラインでのテスト自動実行の設定
- カバレッジ目標の設定（80%以上を推奨）